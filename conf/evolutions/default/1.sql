# --- !Ups

create table "GAMES" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,"name" VARCHAR NOT NULL,"version" INTEGER DEFAULT 1 NOT NULL,"description" VARCHAR NOT NULL,"location" VARCHAR NOT NULL,"operatorId" INTEGER NOT NULL,"created" TIMESTAMP DEFAULT {ts '2013-05-06 20:08:07.629'} NOT NULL,"startTime" TIMESTAMP DEFAULT {ts '2013-05-06 20:08:07.629'} NOT NULL,"endTime" TIMESTAMP NOT NULL,"started" TIMESTAMP DEFAULT {ts '2013-05-06 20:08:07.629'} NOT NULL,"ended" TIMESTAMP NOT NULL,"winning" VARCHAR DEFAULT 'max_points' NOT NULL,"nWins" INTEGER DEFAULT 1 NOT NULL,"difficulty" VARCHAR DEFAULT 'easy' NOT NULL,"maxPlayers" INTEGER DEFAULT 1000000 NOT NULL,"awards" VARCHAR NOT NULL,"status" VARCHAR DEFAULT 'project' NOT NULL,"image" VARCHAR DEFAULT 'games/gameicon.png' NOT NULL);
create table "OPERATORS" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,"login" VARCHAR NOT NULL,"pass_hash" VARCHAR NOT NULL);
create table "TASKS" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,"gameId" INTEGER NOT NULL,"version" INTEGER DEFAULT 1 NOT NULL,"name" VARCHAR NOT NULL,"description" VARCHAR NOT NULL,"deadline" TIMESTAMP NOT NULL,"maxpoints" INTEGER NOT NULL,"maxattempts" INTEGER NOT NULL);
alter table "GAMES" add constraint "OP_FK" foreign key("operatorId") references "OPERATORS"("id") on update NO ACTION on delete NO ACTION;

# --- !Downs

